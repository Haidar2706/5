<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–°–∫–æ—Ä–æ –Ω–∞ –∞—É–∫—Ü–∏–æ–Ω–µ</title>
  <link rel="stylesheet" href="styles.css">
  <script src="auction.js" defer></script>
</head>
<body>
  <div class="container">
    <h2>üïí –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ—Ç—ã</h2>
    <a href="index.html?from=cabinet" class="btn">‚Üê –ù–∞–∑–∞–¥</a>

    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
            <th>–†–∞–∑–º–µ—Ä</th>
            <th>–°—Ç–∞—Ä—Ç–æ–≤–∞—è —Ü–µ–Ω–∞</th>
            <th>–ù–∞—á–∞–ª–æ —Ç–æ—Ä–≥–æ–≤</th>
          </tr>
        </thead>
        <tbody id="soonLotsBody"></tbody>
      </table>
    </div>
  </div>

  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const storedLots = JSON.parse(localStorage.getItem('lots') || '[]');
      const soonLotsBody = document.getElementById('soonLotsBody');
      const now = Date.now();

      const soonLots = storedLots.filter(lot => lot.status === 'scheduled');

      if (soonLots.length === 0) {
        soonLotsBody.innerHTML = `<tr><td colspan="6" style="text-align:center;">üò¥ –ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ—Ç–æ–≤</td></tr>`;
        return;
      }

      soonLots.forEach((lot, index) => {
        const start = new Date(lot.startTime).toLocaleString();
        soonLotsBody.innerHTML += `
          <tr>
            <td>${index + 1}</td>
            <td>${lot.title}</td>
            <td>${lot.category}</td>
            <td>${lot.size || '-'}</td>
            <td>${lot.price} —Å–æ–º</td>
            <td>${start}</td>
          </tr>
        `;
      });
    });
  </script>
</body>
</html>
